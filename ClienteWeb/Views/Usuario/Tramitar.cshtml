@{
    Layout = "~/Views/Shared/_LayoutUser.cshtml";
    ViewBag.Title = "Tramitar solicitud";
}

<div class="min-h-screen bg-gray-100 px-4 pt-10 pb-16 flex justify-center">
    <div class="w-full max-w-7xl bg-white rounded-xl shadow-xl overflow-hidden grid grid-cols-1 md:grid-cols-2">

        <div class="hidden md:block">
            <img src="https://st.depositphotos.com/5390090/51510/v/450/depositphotos_515102604-stock-illustration-registration-form-cute-cartoon-man.jpg"
                 alt="Decoración salud"
                 class="w-full h-full object-cover" />
        </div>

        <div class="p-10">
            <div class="bg-black text-white text-center py-4 rounded-t-lg mb-6">
                <h2 class="text-3xl font-bold">Generar Nueva Solicitud</h2>
            </div>

            @if (TempData["Mensaje"] != null)
            {
                <div class="bg-green-100 border border-green-400 text-green-800 px-4 py-3 rounded mb-4 text-center">
                    @TempData["Mensaje"]
                </div>
            }

            @using (Html.BeginForm(               /* <-- genera el atributo action correcto */
                    "GenerarSolicitud",           /* acción           */
                    "Tramitar",                   /* controlador      */
                    FormMethod.Post,
                    new { enctype = "multipart/form-data", @class = "space-y-6" }))
            {
                @Html.AntiForgeryToken() /* requerido porque tu método usa [ValidateAntiForgeryToken] */

                <div>
                    <label class="block mb-1 font-semibold text-gray-700">Tipo de Solicitud:</label>
                    @Html.DropDownList("IdTipoSolicitud",
                                       ViewBag.TiposSolicitud as SelectList,
                                       "-- Seleccione Tipo --",
                                       new { @class = "w-full bg-white border border-gray-300 text-gray-800 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-black" })
                </div>

                <div>
                    <label class="block mb-1 font-semibold text-gray-700">Ingresa el asunto de tu solicitud</label>
                    <input type="text" name="Cabecera" required
                           placeholder="Ingresa el asunto de tu solicitud"
                           class="w-full bg-white border border-gray-300 text-gray-800 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-black" />
                </div>

                <div>
                    <label class="block mb-1 font-semibold text-gray-700">Descripción</label>
                    <textarea name="Descripcion" rows="4" required
                              placeholder="Describe tu solicitud..."
                              class="w-full bg-white border border-gray-300 text-gray-800 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-black"></textarea>
                </div>

                <div>
                    <label class="block mb-1 font-semibold text-gray-700">Documento Adjunto (opcional)</label>
                    <input type="file" name="DocumentoAdjunto"
                           class="block w-full text-sm text-gray-600 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:bg-black file:text-white hover:file:bg-gray-800" />
                </div>

                <button type="submit"
                        class="w-full bg-black hover:bg-gray-900 text-white py-2 rounded-lg shadow transition duration-300">
                    <i class="bi bi-send"></i> Enviar Solicitud
                </button>
            }
        </div>
    </div>
</div>

@section Scripts {
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />
}
