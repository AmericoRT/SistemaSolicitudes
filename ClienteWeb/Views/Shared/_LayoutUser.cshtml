@using System.Web
@{
    Layout = null;
    var user = HttpContext.Current.User;
    var action = ViewContext.RouteData.Values["action"]?.ToString();
}

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>@ViewBag.Title - Sistema de Solicitudes</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />
    <style>
        html, body {
            height: 100%;
            margin: 0;
        }

        header.topbar {
            background-color: #212529;
            color: white;
            padding: 0.75rem 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        nav.sidebar {
            width: 250px;
            height: 100vh;
            background-color: #343a40;
            color: white;
        }

            nav.sidebar .nav-link {
                color: white;
                padding: 12px 20px;
                display: flex;
                align-items: center;
                gap: 10px;
            }

                nav.sidebar .nav-link:hover {
                    background-color: #495057;
                    text-decoration: none;
                }

                nav.sidebar .nav-link.active {
                    background-color: white;
                    color: #343a40 !important;
                    font-weight: bold;
                }

        main.content-area {
            flex-grow: 1;
            padding: 30px;
            background-color: #f8f9fa;
        }
    </style>
</head>
<body>
    @*<header class="topbar">
            <div><strong>Panel de Control</strong></div>
            <div>
                <a href="@Url.Action("Logout", "Account")" class="text-white text-decoration-none">
                    <i class="bi bi-box-arrow-right"></i> Cerrar sesión
                </a>
            </div>
        </header>*@

    <header class="topbar">
        <div>
            <strong>
                @if (user.IsInRole("Usuario"))
                {
                    @:Panel Usuario
                }
                else if (user.IsInRole("Admin"))
                {
                    @:Panel Administrador
                }
                else if (user.IsInRole("SuperAdministrador"))
                {
                    @:Panel Super Administrador
                }
                else
                {
                    @:Panel de Control
                }
            </strong>
        </div>
        <div>
            <a href="@Url.Action("Logout", "Account")" class="text-white text-decoration-none">
                <i class="bi bi-box-arrow-right"></i> Cerrar sesión
            </a>
        </div>
    </header>


    <div class="d-flex">
        <!-- Sidebar -->
        <nav class="sidebar p-3">
            <h4>Menú</h4>
            <ul class="nav flex-column">
                @if (user.IsInRole("Usuario"))
                {
                    <li><a class="nav-link @(action == "Perfil" ? "active" : "")" href="@Url.Action("Perfil", "Usuario")"><i class="bi bi-person-circle"></i> Perfil</a></li>
                    <li><a class="nav-link @(action == "Tramitar" ? "active" : "")" href="@Url.Action("Tramitar", "Usuario")"><i class="bi bi-file-earmark-text"></i> Tramitar</a></li>
                    <li><a class="nav-link @(action == "Seguimiento" ? "active" : "")" href="@Url.Action("Seguimiento", "Usuario")"><i class="bi bi-clock-history"></i> Seguimiento</a></li>
                }
                else if (user.IsInRole("Admin"))
                {
                    <li><a class="nav-link @(action == "RevisarSolicitudes" ? "active" : "")" href="@Url.Action("RevisarSolicitudes", "Admin")"><i class="bi bi-speedometer2"></i>Solicitudes Pendientes</a></li>
                    <li><a class="nav-link @(action == "MisSolicitudes" ? "active" : "")" href="@Url.Action("MisSolicitudes", "Admin")"><i class="bi bi-list-check"></i>Solicitudes Atendidas</a></li>
                }
                else if (user.IsInRole("SuperAdministrador"))
                {
                    <li><a class="nav-link @(action == "SuperDashboard" ? "active" : "")" href="@Url.Action("SuperDashboard", "SuperAdmin")"><i class="bi bi-shield-lock"></i> Panel SuperAdmin</a></li>
                    <li><a class="nav-link @(action == "Usuarios" ? "active" : "")" href="@Url.Action("Usuarios", "SuperAdmin")"><i class="bi bi-people"></i> Gestión de usuarios</a></li>
                    <li><a class="nav-link @(action == "Configuracion" ? "active" : "")" href="@Url.Action("Configuracion", "SuperAdmin")"><i class="bi bi-gear"></i> Configuración</a></li>
                }
            </ul>
        </nav>

        <!-- Contenido -->
        <main class="content-area">
            @RenderBody()
        </main>
        </divcree

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
